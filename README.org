* blog-backup [[https://travis-ci.org/jiacai2050/blog-backup][https://travis-ci.org/jiacai2050/blog-backup.svg?branch=master]]

Backup blog posts to PDF files.

** Setup

#+begin_src bash

1. install dependencies
npm i

2. compile Node.js script
lein cljsbuild once main
# or
lein release
# or download already compiled main.js from release page
# https://github.com/jiacai2050/blog-backup/releases
#+end_src

** Usage
#+begin_src bash
node bin/main.js -h
  -o, --out-dir DIR          /tmp/blog  output dir
  -w, --who WHO                         whose blog to print
  -a, --addr Address                    print a single page
  -p, --proxy PROXY                     http proxy
  -P, --puppeteer-opts OPTS             options to set on the browser. format: a=b;c=d
  -v, --verbose
  -h, --help

#+end_src
*** Backup single page
#+begin_src bash
node bin/main.js -a https://news.ycombinator.com/item?id=23947157
#+end_src
You can also set a proxy
#+begin_src bash
node bin/main.js -p socks5://127.0.0.1:13659 -a https://news.ycombinator.com/item?id=23947157
#+end_src

*** Backup All blog posts
#+begin_src
# Demo, backup nathan's posts to /tmp/nathan
node bin/main.js -w nathan -o /tmp/nathan -v
#+end_src

**** Supported Blog

| -w     | blog                    |
|--------+-------------------------|
| ljc    | https://liujiacai.net/  |
| yw     | http://www.yinwang.org/ |
| nathan | http://nathanmarz.com/  |
| TBD    | ...                     |

**** Your blog
In order to backup your blog posts, you can try add a new [[./src/blog_backup/type.cljs#L10][Blog]] protocol implementation, it requires two method:
- =current-posts=, return array of post's link, like ={"url": "xxx", "title" "awesome-title" }=
- =page-down!=, define how many pages are there in this blog

This is how Nathan's Blog get defined.
#+begin_src clojure
(defmethod new-blog "nathan" [_ browser]
  (let [archive-url "http://nathanmarz.com/archives/"]
    (go (new-blog-inner browser
                        "div.journal-archive-set > ul > li > a"
                        (constantly archive-url)
                        1))))
#+end_src

*  License
[[http://liujiacai.net/license/MIT.html?year=2020][MIT License]] Â© Jiacai Liu
